# automake学习

## 资源
[官方手册](https://www.gnu.org/software/automake/manual/automake.html)

### 介绍

Automake is a tool for automatically generating Makefile.ins from files called Makefile.am. 

    Automake是一个用来将Makefile.in文件生成Makefile.am文件的工具。

Each Makefile.am is basically a series of make variable definitions, with rules being thrown in occasionally. 

    每个Makefile.am基本上都是一系列make变量定义，偶尔会抛出一些规则。 ---

The generated Makefile.ins are compliant with the GNU Makefile standards.

    生成的Makefile.ins符合GNU Makefile标准。

The GNU Makefile Standards Document (see [Makefile Conventions](https://www.gnu.org/prep/standards/standards.html#Makefile-Conventions) in The GNU Coding Standards) is long, complicated, and subject to change.

    GNU Makefile标准文档又长又复杂，还可能会更改。

The goal of Automake is to remove the burden of Makefile maintenance from the back of the individual GNU maintainer (and put it on the back of the Automake maintainers).

    Automake的目标是将Makefile维护的负担从单个GNU维护人员的背后移除(并将其放在Automake维护人员的背后)。

The typical Automake input file is simply a series of variable definitions. 

    典型的Automake输入文件只是一系列变量定义。

Each such file is processed to create a Makefile.in.

    每个文件被用来生成一个Makefile.in文件。

Automake does constrain a project in certain ways; 

    Automake以确定的方式约束了一个项目；

for instance, it assumes that the project uses Autoconf (see [Introduction](https://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.70/autoconf.html#Top) in The Autoconf Manual), and enforces certain restrictions on the configure.ac contents.

    例如，它假设项目使用Autoconf，并对configure.ac内容实施某些限制。

Automake requires perl in order to generate the Makefile.ins.

    Automake需要Perl才能生成Makefile.ins。

However, the distributions created by Automake are fully GNU standards-compliant, and do not require perl in order to be built.

    但是Automake创建的发行版完全兼容GNU标准，并且不需要Perl即可构建。

## Autotools的介绍

If you are new to Automake, maybe you know that it is part of a set of tools called The Autotools. 

    如果您是第一次接触Automake，也许您知道它是一组名为AutoTools的工具的一部分。

Maybe you’ve already delved into a package full of files named configure, configure.ac, Makefile.in, Makefile.am, aclocal.m4, …, some of them claiming to be generated by Autoconf or Automake.

    也许您已经深入研究了一个包，其中包含名为Configure、configure.ac、Makefile.in、Makefile.am、aclocal.m4、等等这样的文件。你可以看到这些文件中一些声称是由Autoconf或Automake生成的。

But the exact purpose of these files and their relations is probably fuzzy.

    但这些文件的确切用途以及它们之间的关系可能是模糊的。

The goal of this chapter is to introduce you to this machinery, to show you how it works and how powerful it is.

    本章的目的是向您介绍这台机器，展示它是如何工作的，以及功能的强大。

If you’ve never installed or seen such a package, do not worry: this chapter will walk you through it.

    如果您从未安装或看到过这样的软件包，请不要担心：本章将带您了解它。

If you need some teaching material, more illustrations, or a less automake-centered continuation, some slides for this introduction are available in Alexandre Duret-Lutz’s [Autotools Tutorial](https://www.lrde.epita.fr/~adl/autotools.html).

    如果你需要一些教材，更多的插图，或者不是以automake为中心的延伸阅读，在Alexandre Duret-Lutz的Autotools教程中可以找到本简介的一些幻灯片。

This chapter is the written version of the first part of his tutorial.

    本章是他的教程第一部分的书面版本。

## GNU Build System介绍

It is a truth universally acknowledged, that as a developer in possession of a new package, you must be in want of a build system.

    作为一个拥有新软件包的开发人员，您肯定需要一个构建系统，这是一个举世公认的事实。

In the Unix world, such a build system is traditionally achieved using the command make (see [Overview](https://www.gnu.org/software/automake/manual/automake.html#Introduction) in The GNU Make Manual). 

    在Unix世界中，这样的构建系统传统上是使用make命令实现的。

You express the recipe to build your package in a Makefile. 

    您可以在Makefile中明确构建包的方法。

This file is a set of rules to build the files in the package. For instance the program prog may be built by running the linker on the files main.o, foo.o, and bar.o; the file main.o may be built by running the compiler on main.c; etc.

    此文件是在包中构建文件的一组规则。例如，程序prog可以通过在文件main.o、foo.o和bar.o上运行链接器来构建；文件main.o可以通过在main.c上运行编译器来构建；等等。

Each time make is run, it reads Makefile, checks the existence and modification time of the files mentioned, decides what files need to be built (or rebuilt), and runs the associated commands.

    每次运行make时，它都会读取Makefile，检查提到的文件是否存在和修改时间，决定需要构建(或重新构建)哪些文件，并运行相关的命令。

When a package needs to be built on a different platform than the one it was developed on, its Makefile usually needs to be adjusted. For instance the compiler may have another name or require more options. 

    当一个包需要构建在与开发它的平台不同的平台上时，它的Makefile通常需要调整。例如，编译器可能有另一个名称或需要更多选项。

In 1991, David J. MacKenzie got tired of customizing Makefile for the 20 platforms he had to deal with.

    1991年，David J.MacKenzie就因为需要为20个平台定制Makefile文件疯掉了。

Instead, he handcrafted a little shell script called configure to automatically adjust the Makefile (see [Genesis](https://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.70/autoconf.html#Genesis) in The Autoconf Manual).

    相反，他手工创建了一个名为configure的小shell脚本来自动调整Makefile(参见Autoconf手册中的Genesis)。

Compiling his package was now as simple as running ./configure && make.

    编译他的包现只需要执行./configure && make就可以了。

Today this process has been standardized in the GNU project.

    现在这个过程已经在GNU项目中标准化了。

The GNU Coding Standards (see [The Release Process](https://www.gnu.org/prep/standards/standards.html#Managing-Releases) in The GNU Coding Standards) explains how each package of the GNU project should have a configure script, and the minimal interface it should have.